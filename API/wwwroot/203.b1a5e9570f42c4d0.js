"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[203],{7203:(m,h,p)=>{p.d(h,{e:()=>S});class u{constructor(){this.categoryId="",this.sort="name",this.pageIndex=1,this.pageSize=6,this.search="",this.userId="",this.byUser=!1}}var t=p(4769),g=p(5469),_=p(8733),l=p(6814),d=p(95),o=p(7012);function r(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"pagination",1),t.NdJ("pageChanged",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onPaginationChanged(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("boundaryLinks",!0)("totalItems",e.totalCount)("itemsPerPage",e.pageSize)("maxSize",10)}}let C=(()=>{class n{constructor(){this.pageChanged=new t.vpe}onPaginationChanged(e){this.pageChanged.emit(e.page)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pagination"]],inputs:{totalCount:"totalCount",pageSize:"pageSize"},outputs:{pageChanged:"pageChanged"},decls:1,vars:1,consts:[["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","itemsPerPage","maxSize","pageChanged",4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","itemsPerPage","maxSize","pageChanged"]],template:function(e,i){1&e&&t.YNc(0,r,1,4,"pagination",0),2&e&&t.Q6J("ngIf",i.totalCount&&i.pageSize)},dependencies:[l.O5,o.Qt]}),n})();function f(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.likePost())}),t._uU(1,"Like"),t.qZA()}}function x(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.unlikePost())}),t._uU(1,"Unlike"),t.qZA()}}function P(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"button",11),t._uU(2,"View"),t.qZA(),t.YNc(3,f,2,0,"button",12),t.YNc(4,x,2,0,"button",12),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.MGl("routerLink","/post/",e.post.id,""),t.xp6(2),t.Q6J("ngIf",!e.post.isLiked),t.xp6(1),t.Q6J("ngIf",e.post.isLiked)}}function k(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t._uU(2,"Update"),t.qZA(),t.TgZ(3,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.deletePost())}),t._uU(4,"Delete"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.MGl("routerLink","/posts/update/",e.post.id,"")}}function v(n,s){if(1&n&&(t.TgZ(0,"p",10),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Posted by ",e.post.user,"")}}function b(n,s){if(1&n&&(t.TgZ(0,"article",1)(1,"div",2),t._UZ(2,"img",3),t.TgZ(3,"div",4),t.YNc(4,P,5,3,"ng-container",5),t.YNc(5,k,5,1,"ng-container",5),t.qZA()(),t.TgZ(6,"div",6)(7,"h4"),t._uU(8),t.qZA(),t.TgZ(9,"p",7),t._uU(10),t.qZA()(),t.TgZ(11,"div",8),t.YNc(12,v,2,1,"p",9),t.TgZ(13,"p",10),t._uU(14),t.qZA()()()),2&n){const e=t.oxw();t.xp6(2),t.s9C("src",e.post.picture,t.LSH),t.s9C("alt",e.post.title),t.xp6(2),t.Q6J("ngIf","/"===e.router.url),t.xp6(1),t.Q6J("ngIf","/posts"===e.router.url),t.xp6(3),t.Oqu(e.post.title),t.xp6(2),t.Oqu(e.post.description),t.xp6(2),t.Q6J("ngIf","/"===e.router.url),t.xp6(2),t.hij("",e.post.likes," likes")}}let T=(()=>{class n{constructor(e){this.router=e,this.likeClicked=new t.vpe,this.unlikeClicked=new t.vpe,this.deleteClicked=new t.vpe}likePost(){this.likeClicked.emit(this.post?.id)}unlikePost(){this.unlikeClicked.emit(this.post?.id)}deletePost(){this.deleteClicked.emit(this.post?.id)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-post"]],inputs:{post:"post"},outputs:{likeClicked:"likeClicked",unlikeClicked:"unlikeClicked",deleteClicked:"deleteClicked"},decls:1,vars:1,consts:[["class","card mb-5",4,"ngIf"],[1,"card","mb-5"],[1,"image","position-relative",2,"cursor","pointer"],[1,"img","rounded-top",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],[4,"ngIf"],[1,"card-body"],[1,"card-text"],[1,"card-footer","d-flex","justify-content-between","align-items-center"],["class","mb-0",4,"ngIf"],[1,"mb-0"],[1,"btn","btn-primary","me-2",3,"routerLink"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"]],template:function(e,i){1&e&&t.YNc(0,b,15,8,"article",0),2&e&&t.Q6J("ngIf",i.post)},dependencies:[l.O5,_.rH],styles:[".btn[_ngcontent-%COMP%]{width:30%;height:40px}.img[_ngcontent-%COMP%]{width:100%}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:1}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:none;opacity:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(255,255,255,.5);opacity:0;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:1000;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{transform:translate(-20px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{transform:translate(20px)}"]}),n})();const y=["search"];function Z(n,s){if(1&n&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&n){const e=s.$implicit,i=t.oxw();t.Q6J("value",e.id)("selected",i.postParams.categoryId===e.id),t.xp6(1),t.hij(" ",e.name," ")}}function U(n,s){if(1&n&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&n){const e=s.$implicit,i=t.oxw();t.Q6J("value",e.value)("selected",i.postParams.sort===e.value),t.xp6(1),t.hij(" ",e.name," ")}}function F(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-post",15),t.NdJ("likeClicked",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onLike(a))})("unlikeClicked",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onUnlike(a))})("deleteClicked",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onDelete(a))}),t.qZA()()}if(2&n){const e=s.$implicit;t.xp6(1),t.Q6J("post",e)}}function I(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"section",16)(1,"app-pagination",17),t.NdJ("pageChanged",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onPageChanged(a))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("totalCount",e.totalCount)("pageSize",e.postParams.pageSize)}}let S=(()=>{class n{constructor(e,i){this.postService=e,this.router=i,this.posts=[],this.categories=[],this.postParams=new u,this.sortOptions=[{name:"Alphabetical",value:"name"},{name:"Most liked",value:"likesDesc"},{name:"New",value:"newest"}],this.totalCount=0}ngOnInit(){this.getPosts(),this.getCategories()}getPosts(){"/posts"===this.router.url&&(this.postParams.byUser=!0),this.postService.getPosts(this.postParams).subscribe({next:e=>{this.posts=e.data,this.postParams.pageIndex=e.pageIndex,this.postParams.pageSize=e.pageSize,this.totalCount=e.count},error:e=>console.log(e)})}getCategories(){this.postService.getCategories().subscribe({next:e=>this.categories=[{id:"",name:"All"},...e],error:e=>console.log(e)})}onCategorySelected(e){this.postParams.categoryId=e.target.value,this.postParams.pageIndex=1,this.getPosts()}onSortSelected(e){this.postParams.sort=e.target.value,this.getPosts()}onPageChanged(e){this.postParams.pageIndex!==e&&(this.postParams.pageIndex=e,this.getPosts())}onSearch(){this.postParams.search=this.searchTerm?.nativeElement.value,this.postParams.pageIndex=1,this.getPosts()}onReset(){this.searchTerm&&(this.searchTerm.nativeElement.value=""),this.postParams=new u,this.getPosts()}onLike(e){this.postService.createLike(e).subscribe({next:()=>this.getPosts()})}onUnlike(e){this.postService.deleteLike(e).subscribe({next:()=>this.getPosts()})}onDelete(e){this.postService.deletePost(e).subscribe({next:()=>this.getPosts()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.L),t.Y36(_.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-feed"]],viewQuery:function(e,i){if(1&e&&t.Gf(y,5),2&e){let a;t.iGM(a=t.CRH())&&(i.searchTerm=a.first)}},decls:26,vars:4,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-2"],[1,"form-select","mb-4",3,"change"],["class","list-group-item",3,"value","selected",4,"ngFor","ngForOf"],[1,"col-5"],[1,"d-flex"],["type","text","placeholder","Search",1,"form-control","me-2",3,"keyup.enter"],["search",""],["type","button",1,"btn","btn-primary","mx-2",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"col-9"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"list-group-item",3,"value","selected"],[3,"post","likeClicked","unlikeClicked","deleteClicked"],[1,"d-flex","justify-content-center"],[3,"totalCount","pageSize","pageChanged"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"h5"),t._uU(4,"Categories"),t.qZA(),t.TgZ(5,"select",3),t.NdJ("change",function(c){return i.onCategorySelected(c)}),t.YNc(6,Z,2,3,"option",4),t.qZA()(),t.TgZ(7,"div",2)(8,"h5"),t._uU(9,"Sort"),t.qZA(),t.TgZ(10,"select",3),t.NdJ("change",function(c){return i.onSortSelected(c)}),t.YNc(11,U,2,3,"option",4),t.qZA()(),t.TgZ(12,"div",5)(13,"h5"),t._uU(14,"Search"),t.qZA(),t.TgZ(15,"div",6)(16,"input",7,8),t.NdJ("keyup.enter",function(){return i.onSearch()}),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){return i.onSearch()}),t._uU(19,"Search"),t.qZA(),t.TgZ(20,"button",10),t.NdJ("click",function(){return i.onReset()}),t._uU(21,"Reset"),t.qZA()()()(),t.TgZ(22,"section",1)(23,"div",11),t.YNc(24,F,2,1,"div",12),t.qZA()(),t.YNc(25,I,2,2,"section",13),t.qZA()),2&e&&(t.xp6(6),t.Q6J("ngForOf",i.categories),t.xp6(5),t.Q6J("ngForOf",i.sortOptions),t.xp6(13),t.Q6J("ngForOf",i.posts),t.xp6(1),t.Q6J("ngIf",i.totalCount))},dependencies:[l.sg,l.O5,d.YN,d.Kr,C,T]}),n})()},5469:(m,h,p)=>{p.d(h,{L:()=>_});var u=p(9862),t=p(553),g=p(4769);let _=(()=>{class l{constructor(o){this.http=o,this.baseUrl=t.N.apiUrl}getPosts(o){let r=new u.LE;return o.categoryId&&(r=r.append("categoryId",o.categoryId)),o.search&&(r=r.append("search",o.search)),o.byUser&&(r=r.append("byUser",!0)),r=r.append("sort",o.sort),r=r.append("pageIndex",o.pageIndex),r=r.append("pageSize",o.pageSize),this.http.get(this.baseUrl+"posts",{params:r})}getPost(o){return this.http.get(this.baseUrl+"posts/"+o)}getCategories(){return this.http.get(this.baseUrl+"posts/categories")}createLike(o){return this.http.post(this.baseUrl+"likes/"+o,{})}deleteLike(o){return this.http.delete(this.baseUrl+"likes/"+o)}createPost(o){return this.http.post(this.baseUrl+"posts",o)}updatePost(o,r){return this.http.put(this.baseUrl+"posts/"+o,r)}deletePost(o){return this.http.delete(this.baseUrl+"posts/"+o)}uploadPicture(o){const r=new FormData;return r.append("file",o),this.http.post(this.baseUrl+"image",r,{responseType:"text",observe:"response"})}deletePicture(o){return this.http.delete(this.baseUrl+"image/"+o)}}return l.\u0275fac=function(o){return new(o||l)(g.LFG(u.eN))},l.\u0275prov=g.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);